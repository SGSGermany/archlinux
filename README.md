Arch Linux
==========

[`archlinux`](https://ghcr.io/sgsgermany/archlinux) is [@SGSGermany](https://github.com/SGSGermany)'s base image for containers based on [Arch Linux](https://archlinux.org/). This image is built *daily* at 03:00 UTC on top of the *weekly* built [official Docker image](https://hub.docker.com/_/archlinux) using [GitHub Actions](https://github.com/SGSGermany/archlinux/actions/workflows/container-publish.yml). All images are tagged with their build date and build job number (e.g. `20190618.1658821493.1`), the latest image is additionally tagged with `latest`.

Arch Linux is no Linux distribution designed for containers, thus it's quite clunky with a compressed image size of more than 120 MB. Even though there's another [official Arch Linux image](https://hub.docker.com/r/archlinux/archlinux) available that is updated daily, we made the conscious decision to create our own image. The reason is that by using the daily updated image, our servers would have to download the full 120 MB image every single day, even if no package was updated. By using the weekly updated image as a basis and running `pacman -Syu` daily, our servers only have to download the changes since the last weekly build. This causes a higher disk usage, but spares a lot of traffic and updates run faster in general. However, we won't trigger a rebuild unless one of the [`base` packages](https://www.archlinux.de/packages/core/x86_64/base) was updated, thus we don't necessarily pick up the latest weekly build immediately.

Please note that this image intentionally contains Pacman's sync databases (stored at `/var/lib/pacman/sync`). Install new packages using `pacman -S`. You *must not* update the sync database (i.e. `pacman -Sy`) without also upgrading the system (i.e. `pacman -Su`), because Arch Linux specifically [doesn't support partial upgrades](https://wiki.archlinux.org/title/System_maintenance#Partial_upgrades_are_unsupported). Since this image is updated pretty often, there is usually no need to perform a system upgrade yourself. However, if you want to install additional software and this software was updated since the last build, `pacman -S` will bail with "404 Not Found" errors. In this case you have to do a system upgrade first (i.e. run `pacman -Syu`).
